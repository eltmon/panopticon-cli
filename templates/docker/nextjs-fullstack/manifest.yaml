name: nextjs-fullstack
description: Next.js full-stack application with PostgreSQL
version: 1.0.0

services:
  - frontend
  - database

variables:
  app_name:
    type: string
    default: myapp
    description: Application name
  node_version:
    type: number
    default: 20
    description: Node.js version
  database_name:
    type: string
    default: appdb
    description: PostgreSQL database name
  enable_prisma:
    type: boolean
    default: true
    description: Enable Prisma ORM setup
  app_port:
    type: number
    default: 3000
    description: Next.js dev server port
  db_port:
    type: number
    default: 5432
    description: PostgreSQL port

outputs:
  - source: docker-compose.yml.j2
    destination: docker-compose.yml
  - source: Dockerfile.j2
    destination: Dockerfile.dev
  - source: dev.sh.j2
    destination: dev
    executable: true
  - source: .env.j2
    destination: .env.example
  - source: prisma-init.sh.j2
    destination: scripts/prisma-init.sh
    executable: true
    condition: variables.enable_prisma

copy:
  - README.md
