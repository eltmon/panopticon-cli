{"id":"panopticon-12d","title":"PAN-81: Write migration safety tests","description":"CRITICAL: Tests to verify migration doesn't lose data. 1) Parity test - compare old vs new totals, 2) Subagent inclusion test, 3) Empty state test, 4) Partial state recovery test, 5) Idempotency test. Use mock session files with known token counts.","status":"open","priority":2,"issue_type":"task","owner":"eltmon@gmail.com","created_at":"2026-01-25T09:03:27.003720761-08:00","created_by":"Eltmon","updated_at":"2026-01-25T09:03:27.003720761-08:00","labels":["PAN-81","difficulty:medium","linear"],"dependencies":[{"issue_id":"panopticon-12d","depends_on_id":"panopticon-vx8","type":"blocks","created_at":"2026-01-25T09:04:16.803606871-08:00","created_by":"Eltmon"}]}
{"id":"panopticon-1by","title":"PAN-81: Implement retention.ts - 90-day rolling cleanup","description":"Implement cleanOldEvents() to remove events older than 90 days from events.jsonl while preserving aggregates. Run on dashboard startup or daily cron.","status":"open","priority":2,"issue_type":"task","owner":"eltmon@gmail.com","created_at":"2026-01-25T09:02:53.047073311-08:00","created_by":"Eltmon","updated_at":"2026-01-25T09:02:53.047073311-08:00","labels":["PAN-81","difficulty:simple","linear"],"dependencies":[{"issue_id":"panopticon-1by","depends_on_id":"panopticon-rbz","type":"blocks","created_at":"2026-01-25T09:04:15.343662038-08:00","created_by":"Eltmon"}]}
{"id":"panopticon-1qv","title":"PAN-91: Implementation","status":"closed","priority":1,"issue_type":"task","owner":"eltmon@gmail.com","created_at":"2026-01-25T06:19:59.191066617-08:00","created_by":"Eltmon","updated_at":"2026-01-25T10:31:17.866764458-08:00","closed_at":"2026-01-25T10:31:17.866767058-08:00","labels":["workspace:pan-91"],"comments":[{"id":5,"issue_id":"panopticon-1qv","author":"Eltmon","text":"Implementation complete: Added getActiveSessionModel() to jsonl-parser, updated workspace endpoint to return agentModelFull, added tooltips to frontend agent badge and cost breakdown. All tests pass. Committed and pushed to feature/pan-91.","created_at":"2026-01-25T18:31:20Z"}]}
{"id":"panopticon-25j","title":"PAN-91: Update frontend types and add tooltips","description":"1. Add agentModelFull to WorkspaceInfo interface. 2. Add title tooltip to agent badge showing full model ID. 3. Add getFriendlyModelName() helper function. 4. Add tooltips to cost summary By Model section. Location: src/dashboard/frontend/src/components/IssueDetailPanel.tsx","status":"closed","priority":2,"issue_type":"task","owner":"eltmon@gmail.com","created_at":"2026-01-25T10:25:22.621224346-08:00","created_by":"Eltmon","updated_at":"2026-01-25T10:30:01.59968442-08:00","closed_at":"2026-01-25T10:30:01.599689621-08:00","labels":["PAN-91","difficulty:simple","linear"],"comments":[{"id":4,"issue_id":"panopticon-25j","author":"Eltmon","text":"Updated IssueDetailPanel.tsx: Added agentModelFull to WorkspaceInfo interface, created getFriendlyModelName() helper, added tooltips to agent badge and cost breakdown showing full model IDs.","created_at":"2026-01-25T18:30:04Z"}]}
{"id":"panopticon-2bp","title":"PAN-101: Add agent attribution badges to Kanban issue cards","description":"Main implementation task: Fetch specialists in KanbanBoard, create AgentBadge component, update IssueCard to display which agents are working on each issue. Include conflict warning (slow pulse) when multiple agents on same issue.","status":"closed","priority":2,"issue_type":"task","owner":"eltmon@gmail.com","created_at":"2026-01-25T05:36:02.718905964-08:00","created_by":"Eltmon","updated_at":"2026-01-25T05:48:06.842073524-08:00","closed_at":"2026-01-25T05:48:06.842076525-08:00","labels":["PAN-101","difficulty:medium","github"],"comments":[{"id":1,"issue_id":"panopticon-2bp","author":"Eltmon","text":"Implementation complete:\n- Added SpecialistAgent type import to KanbanBoard\n- Added fetchSpecialists function and useQuery with 5s polling\n- Created AgentBadge component with icons and conflict detection\n- Updated IssueCardProps to include specialists array\n- Updated IssueCard rendering to find specialists by currentIssue\n- Replaced model badge with agent attribution badges showing work/planning/specialist agents\n- Added slow-pulse animation when multiple agents detected on same issue\n- All edge cases from STATE.md handled (no agent, single agent, multiple agents, conflict scenarios)","created_at":"2026-01-25T13:46:09Z"}]}
{"id":"panopticon-3e8","title":"PAN-81: Update README with cost tracking documentation","description":"Document new cost tracking system in README: how hooks work, data files location, migration process, API endpoints. Include troubleshooting section for when costs aren't appearing.","status":"open","priority":2,"issue_type":"task","owner":"eltmon@gmail.com","created_at":"2026-01-25T09:03:33.90111277-08:00","created_by":"Eltmon","updated_at":"2026-01-25T09:03:33.90111277-08:00","labels":["PAN-81","difficulty:simple","linear"],"dependencies":[{"issue_id":"panopticon-3e8","depends_on_id":"panopticon-zw6","type":"blocks","created_at":"2026-01-25T09:04:17.023479179-08:00","created_by":"Eltmon"},{"issue_id":"panopticon-3e8","depends_on_id":"panopticon-o1i","type":"blocks","created_at":"2026-01-25T09:04:17.183879639-08:00","created_by":"Eltmon"},{"issue_id":"panopticon-3e8","depends_on_id":"panopticon-12d","type":"blocks","created_at":"2026-01-25T09:04:17.364451301-08:00","created_by":"Eltmon"}]}
{"id":"panopticon-3xl","title":"PAN-101: Implementation","status":"closed","priority":1,"issue_type":"task","owner":"eltmon@gmail.com","created_at":"2026-01-25T05:28:37.03968541-08:00","created_by":"Eltmon","updated_at":"2026-01-25T05:49:27.946114387-08:00","closed_at":"2026-01-25T05:49:27.946116887-08:00","labels":["workspace:pan-101"]}
{"id":"panopticon-521","title":"PAN-91: Add getActiveSessionModel() to jsonl-parser","description":"Create function to get full model ID from Claude Code session files. Takes workspace path, returns model like 'claude-sonnet-4-5-20250929'. Location: src/lib/cost-parsers/jsonl-parser.ts","status":"closed","priority":2,"issue_type":"task","owner":"eltmon@gmail.com","created_at":"2026-01-25T10:25:06.294615497-08:00","created_by":"Eltmon","updated_at":"2026-01-25T10:27:52.000433053-08:00","closed_at":"2026-01-25T10:27:52.000436153-08:00","labels":["PAN-91","difficulty:simple","linear"],"comments":[{"id":2,"issue_id":"panopticon-521","author":"Eltmon","text":"Added getActiveSessionModel() function to jsonl-parser.ts. Converts workspace path to Claude project dir, finds most recent session file, and extracts full model ID.","created_at":"2026-01-25T18:27:53Z"}]}
{"id":"panopticon-6ua","title":"Test workspace label","status":"closed","priority":2,"issue_type":"task","owner":"eltmon@gmail.com","created_at":"2026-01-24T21:04:22.51864039-08:00","created_by":"Eltmon","updated_at":"2026-01-24T21:04:49.510168817-08:00","closed_at":"2026-01-24T21:04:49.510168817-08:00","close_reason":"test cleanup","labels":["workspace:test-123"]}
{"id":"panopticon-6zr","title":"Test workspace label","status":"closed","priority":2,"issue_type":"task","owner":"eltmon@gmail.com","created_at":"2026-01-24T21:04:29.155554723-08:00","created_by":"Eltmon","updated_at":"2026-01-24T21:04:49.400888088-08:00","closed_at":"2026-01-24T21:04:49.400888088-08:00","close_reason":"test cleanup","labels":["workspace:test-123"]}
{"id":"panopticon-8rk","title":"PAN-81: Create cost tracking module structure","description":"Create src/lib/costs/ directory with index.ts, types.ts. Define interfaces for CostEvent, CostCache, MigrationState. Simple scaffolding task.","status":"open","priority":2,"issue_type":"task","owner":"eltmon@gmail.com","created_at":"2026-01-25T09:02:29.484948478-08:00","created_by":"Eltmon","updated_at":"2026-01-25T09:02:29.484948478-08:00","labels":["PAN-81","difficulty:simple","linear"]}
{"id":"panopticon-8y5","title":"PAN-81: Implementation","status":"open","priority":1,"issue_type":"task","owner":"eltmon@gmail.com","created_at":"2026-01-25T06:19:21.887372313-08:00","created_by":"Eltmon","updated_at":"2026-01-25T06:19:21.887372313-08:00","labels":["workspace:pan-81"]}
{"id":"panopticon-j0i","title":"PAN-91: Update workspace endpoint to return full model ID","description":"Add agentModelFull field to workspace API response. Call getActiveSessionModel() when agent is running. Location: src/dashboard/server/index.ts around line 3689","status":"closed","priority":2,"issue_type":"task","owner":"eltmon@gmail.com","created_at":"2026-01-25T10:25:11.917598937-08:00","created_by":"Eltmon","updated_at":"2026-01-25T10:28:45.788086668-08:00","closed_at":"2026-01-25T10:28:45.788092169-08:00","labels":["PAN-91","difficulty:simple","linear"],"comments":[{"id":3,"issue_id":"panopticon-j0i","author":"Eltmon","text":"Updated workspace endpoint to call getActiveSessionModel() and return agentModelFull in response. Added import and integrated with existing agentModel extraction.","created_at":"2026-01-25T18:28:48Z"}]}
{"id":"panopticon-nay","title":"PAN-81: Implement aggregator.ts - cache management","description":"Implement loadCache(), saveCache(), updateCacheFromEvent(), rebuildFromEvents(). Cache format: by-issue.json with version, status, lastEventTs, lastEventLine, issues map.","status":"open","priority":2,"issue_type":"task","owner":"eltmon@gmail.com","created_at":"2026-01-25T09:02:41.310279806-08:00","created_by":"Eltmon","updated_at":"2026-01-25T09:02:41.310279806-08:00","labels":["PAN-81","difficulty:medium","linear"],"dependencies":[{"issue_id":"panopticon-nay","depends_on_id":"panopticon-8rk","type":"blocks","created_at":"2026-01-25T09:04:14.656163192-08:00","created_by":"Eltmon"}]}
{"id":"panopticon-nfu","title":"PAN-81: Register cost-hook in setup hooks command","description":"Update src/cli/commands/setup/hooks.ts to install cost-hook alongside existing heartbeat/pre-tool/stop hooks. Copy script to ~/.panopticon/bin/ and register in ~/.claude/settings.json.","status":"open","priority":2,"issue_type":"task","owner":"eltmon@gmail.com","created_at":"2026-01-25T09:03:04.374593583-08:00","created_by":"Eltmon","updated_at":"2026-01-25T09:03:04.374593583-08:00","labels":["PAN-81","difficulty:simple","linear"],"dependencies":[{"issue_id":"panopticon-nfu","depends_on_id":"panopticon-plo","type":"blocks","created_at":"2026-01-25T09:04:15.824748212-08:00","created_by":"Eltmon"}]}
{"id":"panopticon-o1i","title":"PAN-81: Add status badge to MetricsSummary component","description":"Add badge to MetricsSummary.tsx showing 'Live' (green), 'Migrating' (yellow), or 'Stale' (red) based on /api/costs/status response. Stale = no events in 24h.","status":"open","priority":2,"issue_type":"task","owner":"eltmon@gmail.com","created_at":"2026-01-25T09:03:21.029815945-08:00","created_by":"Eltmon","updated_at":"2026-01-25T09:03:21.029815945-08:00","labels":["PAN-81","difficulty:simple","linear"],"dependencies":[{"issue_id":"panopticon-o1i","depends_on_id":"panopticon-on8","type":"blocks","created_at":"2026-01-25T09:04:16.653474572-08:00","created_by":"Eltmon"}]}
{"id":"panopticon-on8","title":"PAN-81: Update dashboard API endpoints","description":"Update /api/costs/by-issue to read from cache (O(1) lookup). Add /api/costs/rebuild for manual rebuild. Add /api/costs/status for migration status. Remove old parseWorkspaceSessionUsageAsync calls from cost endpoints.","status":"open","priority":2,"issue_type":"task","owner":"eltmon@gmail.com","created_at":"2026-01-25T09:03:09.631152555-08:00","created_by":"Eltmon","updated_at":"2026-01-25T09:03:09.631152555-08:00","labels":["PAN-81","difficulty:medium","linear"],"dependencies":[{"issue_id":"panopticon-on8","depends_on_id":"panopticon-nay","type":"blocks","created_at":"2026-01-25T09:04:16.108974435-08:00","created_by":"Eltmon"}]}
{"id":"panopticon-plo","title":"PAN-81: Create cost-hook script","description":"Create scripts/cost-hook bash script that extracts usage from Claude Code PostToolUse event stdin, writes to events.jsonl. Must be resilient (never break Claude Code), log errors to errors.log. Works for both main agents AND subagents.","status":"open","priority":2,"issue_type":"task","owner":"eltmon@gmail.com","created_at":"2026-01-25T09:02:58.863262883-08:00","created_by":"Eltmon","updated_at":"2026-01-25T09:02:58.863262883-08:00","labels":["PAN-81","difficulty:medium","linear"],"dependencies":[{"issue_id":"panopticon-plo","depends_on_id":"panopticon-rbz","type":"blocks","created_at":"2026-01-25T09:04:15.589897086-08:00","created_by":"Eltmon"}]}
{"id":"panopticon-rbz","title":"PAN-81: Implement events.ts - event log read/write","description":"Implement appendEvent() to write to events.jsonl, readEvents() to read with offset/limit, getLastEventLine() for resumption. Include file locking for concurrent writes.","status":"open","priority":2,"issue_type":"task","owner":"eltmon@gmail.com","created_at":"2026-01-25T09:02:35.70493541-08:00","created_by":"Eltmon","updated_at":"2026-01-25T09:02:35.70493541-08:00","labels":["PAN-81","difficulty:medium","linear"],"dependencies":[{"issue_id":"panopticon-rbz","depends_on_id":"panopticon-8rk","type":"blocks","created_at":"2026-01-25T09:04:14.394148782-08:00","created_by":"Eltmon"}]}
{"id":"panopticon-vx8","title":"PAN-81: Implement migration.ts - historical data import","description":"One-time migration: parse ALL existing session files including subagents/ subdirectories. Must be idempotent, resumable, and non-blocking. Write migration marker when complete. CRITICAL: Include parity tests comparing old vs new totals.","status":"open","priority":2,"issue_type":"task","owner":"eltmon@gmail.com","created_at":"2026-01-25T09:02:47.478532341-08:00","created_by":"Eltmon","updated_at":"2026-01-25T09:02:47.478532341-08:00","labels":["PAN-81","difficulty:complex","linear"],"dependencies":[{"issue_id":"panopticon-vx8","depends_on_id":"panopticon-rbz","type":"blocks","created_at":"2026-01-25T09:04:14.908656981-08:00","created_by":"Eltmon"},{"issue_id":"panopticon-vx8","depends_on_id":"panopticon-nay","type":"blocks","created_at":"2026-01-25T09:04:15.123379008-08:00","created_by":"Eltmon"}]}
{"id":"panopticon-zw6","title":"PAN-81: Add migration trigger on dashboard startup","description":"On dashboard startup, check if migration marker exists. If not, trigger non-blocking migration in background. Update cache status to 'migrating' during migration, 'live' when complete.","status":"open","priority":2,"issue_type":"task","owner":"eltmon@gmail.com","created_at":"2026-01-25T09:03:15.089106711-08:00","created_by":"Eltmon","updated_at":"2026-01-25T09:03:15.089106711-08:00","labels":["PAN-81","difficulty:simple","linear"],"dependencies":[{"issue_id":"panopticon-zw6","depends_on_id":"panopticon-vx8","type":"blocks","created_at":"2026-01-25T09:04:16.323906073-08:00","created_by":"Eltmon"},{"issue_id":"panopticon-zw6","depends_on_id":"panopticon-on8","type":"blocks","created_at":"2026-01-25T09:04:16.48278075-08:00","created_by":"Eltmon"}]}
